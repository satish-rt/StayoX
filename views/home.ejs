<% layout("/layouts/boilerplate") %>

<!-- FLOATING GLASS SEARCH BAR -->
<section class="sticky top-6 z-50">
  <div class="max-w-screen-xl mx-auto px-4">
    <form action="/listings" method="GET"
      class="backdrop-blur-xl bg-white/70 dark:bg-slate-800/70
             border border-white/40 dark:border-slate-700
             rounded-2xl shadow-xl px-6 py-5
             flex flex-col md:flex-row gap-4 items-stretch md:items-center">

      <div class="flex-1 flex items-center bg-stone-100/70 dark:bg-stone-700/60
                  border border-stone-300 dark:border-stone-600
                  rounded-xl overflow-hidden">
        <span class="material-icons px-4 text-amber-600">location_on</span>
        <input
          name="search"
          type="text"
          value="<%= typeof searchParams !== 'undefined' && searchParams.search ? searchParams.search : '' %>"
          placeholder="Search city, location or home..."
          class="w-full px-4 py-3 bg-transparent focus:ring-0
                 text-sm text-stone-900 dark:text-white
                 placeholder-stone-500 dark:placeholder-stone-400"/>
      </div>

      <button type="submit"
        class="bg-gradient-to-r from-amber-500 to-amber-600
               hover:from-amber-600 hover:to-amber-700
               text-white px-10 py-3 rounded-xl
               uppercase tracking-widest text-xs font-semibold
               shadow-lg transition">
        <span class="material-icons mr-2 text-sm align-middle">search</span>
        Search
      </button>
    </form>
  </div>
</section>

<!-- HERO SECTION -->
<main class="max-w-screen-2xl mx-auto px-6 lg:px-16 py-16">

  <div class="grid grid-cols-1 lg:grid-cols-12 gap-12 items-center">

    <!-- LEFT CONTENT -->
    <div class="lg:col-span-7 space-y-6">
      <div class="flex items-center gap-3">
        <span class="w-10 h-px bg-amber-400"></span>
        <span class="italic text-amber-600 text-sm font-medium">
          Curated Living
        </span>
      </div>

      <h1 class="font-header text-4xl md:text-5xl lg:text-6xl
                 leading-tight text-[#08112a] dark:text-white">
        Designed for <br/>
        <span class="italic font-light text-stone-500 dark:text-stone-300">
          Modern Travelers
        </span>
      </h1>

      <p class="text-stone-600 dark:text-stone-400
                text-base leading-relaxed max-w-lg">
        Hand-picked homes crafted for comfort, elegance and unforgettable
        experiences — where design meets lifestyle.
      </p>

      <a href="/listings/new"
        class="inline-flex items-center gap-3
               bg-black/90 text-white px-7 py-3
               rounded-full uppercase tracking-widest
               text-xs font-semibold hover:bg-black transition">
        <span class="material-icons text-sm">add</span>
        Add Your Property
      </a>
    </div>

    <!-- RIGHT IMAGE -->
    <div class="lg:col-span-5 relative group">
      <div class="relative overflow-hidden rounded-2xl shadow-2xl">
        <img
          src="https://lh3.googleusercontent.com/aida-public/AB6AXuDGthoYyeAfWLuoDddWKqNNFYlCMjfCgBhnrN4_JfC5-0zgJtdT7hA2YwkgeWSrpmfucVQiE2fPPMPuZIT6PWiGSZEc3-kjZFDlHY_7Tq8Ebs8xVJv-03nFqyx8kxZvRL7vdUyMvxSeSRLwlMhvNJ66WjoCaCdJv8y0cRo1Sff628VdmYdWfqb5T8Htr9tgTSgEO-Layk8BPrDCmEfRXCd-HVYB6y3XIwYE8EbzADJmwE21EfiX9iTYZgiopG_Wgq74devpSgmnF-Ua"
          class="w-full h-[420px] object-cover
                 scale-105 group-hover:scale-110
                 transition-transform duration-1000"
          alt="Luxury home"/>

        <div class="absolute inset-0 bg-gradient-to-t
                    from-black/40 via-black/10 to-transparent"></div>
      </div>

      <!-- TESTIMONIAL -->
      <div class="absolute -bottom-10 right-6
                  backdrop-blur-xl bg-white/80 dark:bg-stone-900/80
                  border border-white/40 dark:border-stone-700
                  rounded-2xl p-5 shadow-xl w-64">
        <div class="flex text-amber-500 mb-2">
          <span class="material-icons text-xs">star</span>
          <span class="material-icons text-xs">star</span>
          <span class="material-icons text-xs">star</span>
          <span class="material-icons text-xs">star</span>
          <span class="material-icons text-xs">star</span>
        </div>
        <p class="italic text-sm text-stone-800 dark:text-stone-200">
          “Every detail feels intentional. A true luxury experience.”
        </p>
        <span class="block mt-3 text-xs uppercase tracking-widest
                     text-stone-500 font-semibold">
          — Elena R.
        </span>
      </div>
    </div>

  </div>

  <!-- FEATURED LISTINGS -->
  <% if (allListing && allListing.length > 0) { %>
  <section class="mt-40">
    <div class="mb-20">
      <h2 class="text-5xl lg:text-6xl font-medium text-[#08112a] dark:text-white">
        Featured Residences
      </h2>
      <p class="text-stone-600 dark:text-stone-400 mt-4">
        Homes selected for design, comfort and experience
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-14">
      <% allListing.slice(0, 6).forEach((listing) => { %>
      <div class="group space-y-4 cursor-pointer">
        <div class="aspect-[3/4] overflow-hidden rounded-2xl">
          <img
            src="<%= listing.image.url %>"
            alt="<%= listing.title %>"
            class="w-full h-full object-cover
                   grayscale-[20%] group-hover:grayscale-0
                   group-hover:scale-105
                   transition duration-700"/>
        </div>

        <h3 class="text-xl font-medium text-[#08112a]
                   dark:text-white group-hover:text-blue-600 transition">
          <%= listing.title %>
        </h3>

        <div class="flex justify-between text-xs uppercase tracking-widest text-stone-500">
          <span><%= listing.location %></span>
          <a href="/listings/<%= listing._id %>"
             class="font-semibold text-[#08112a] dark:text-stone-200">
            ₹<%= listing.price.toLocaleString("en-IN") %>/night
          </a>
        </div>
      </div>
      <% }) %>
    </div>

    <div class="mt-20 text-center">
      <a href="/listings"
        class="inline-block bg-black text-white
               px-14 py-4 rounded-full
               uppercase tracking-widest text-xs
               hover:scale-105 transition">
        Explore All Properties
      </a>
    </div>
  </section>
  <% } %>

  <!-- FINAL CTA -->
  <section class="mt-48 py-32 text-center
                  bg-gradient-to-b from-transparent
                  to-stone-100 dark:to-stone-900 rounded-3xl">
    <h2 class="text-5xl lg:text-6xl font-medium text-[#08112a] dark:text-white">
      Ready to Share Your Home?
    </h2>
    <p class="text-stone-600 dark:text-stone-400 max-w-2xl mx-auto mt-6">
      Join our curated network of hosts and turn your space into an experience.
    </p>

    <% if (!currUser) { %>
      <a href="/login"
        class="inline-block mt-12 bg-black text-white
               px-14 py-4 rounded-full uppercase tracking-widest text-xs">
        Get Started
      </a>
    <% } else { %>
      <a href="/listings/new"
        class="inline-block mt-12 bg-black text-white
               px-14 py-4 rounded-full uppercase tracking-widest text-xs">
        List Your Property
      </a>
    <% } %>
  </section>

</main>
